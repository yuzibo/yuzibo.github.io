---
title: awk和sed的简单实用
category: shell
layout: post
---

* content
{:toc}

要说 shell 编程，绝对是一个瑞士军刀级别的工具，效率惊人的很。

# sed 在特定行插入文本

这个需求是我自己整理博客时提出来的。为什么？原因是这样的，在我上一篇文章
中，我也已经提出来了，更换了博客主题，同时也无意间看到该博主实现了标题导航
的功能，这个确实吸引人的，那么，我的博客应该如何实现这个功能呢？

幸运的是，我的文档就是使用Markdown，只需添加两行代码即可完成：

```html
* content
{:toc}
```
但是，这个代码要添加在什么位置呢？一般来说，我的博客正文是这样的：

```html
---
title: awk和sed的简单实用
category: shell
layout: post
---

```
一般情况下也就是从第六行开始，为了安全起见，第六行空一行。下面是我根据网络
资源搜集的脚本并测试还可以的：

```bash
sed -i '7 i* content\n{:toc}\n' `grep layout -rl .`
```
这句命令简单了解一下就是，sed命令，指定在第7行插入`* content\n{:toc}\n`，'\n'
是换行的意思，i是在第7行前，a是在第7行后，这里是为了与vim相一致。后面一句`grep`是
为了能够在多个文件中插入(另一句就是如何在特定目录中的所有文件中特定的位置插入代码)



