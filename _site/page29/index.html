<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>vimer</title>
    <meta name="description" content="">

    <link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_8v3czwksspqlg14i.css">
    <link rel="stylesheet" href="/css/main.css ">
    <link rel="canonical" href="http://0.0.0.0:4000/page29/">
    <link rel="alternate" type="application/rss+xml" title="vimer" href="http://0.0.0.0:4000/feed.xml ">





</head>


  <body>

    <header id="top">
    <div class="wrapper">
        <a href="/" class="brand">vimer</a>
        <small>linux kernel 爱好者</small>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/">
                    
                        <i class="fa fa-home"></i>Home
                    </a>
                </li>

                
                    
                    <li>
                        
                        <a href="/archive/">
                        
                            <i class="fa fa-archive"></i>Archives
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/category/">
                        
                            <i class="fa fa-th-list"></i>Categories
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/about/">
                        
                            <i class="fa fa-"></i>About
                        </a>
                    </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>


        <div class="page clearfix" index>
    <div class="left">
        <h1>Welcome to here</h1>
        <small>简单即生活</small>
        <hr>
        <ul>
            
              <li>
                <h2>
                  <a class="post-link" href="/2015/01/14/KeySyscalls/">12 linux 系统呼叫函数和 strace</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2015-01-14
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#kernel" title="Category: kernel" rel="category">kernel</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <h1 id="强大的调试工具-strace">强大的调试工具 strace</h1>
<p>strace是一个优秀的调试工具，它调用的是系统函数ptrace(),缺点是导致应用程序运行的非常慢。</p>

<h1 id="使用">使用</h1>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>strace -e open target-file
strace -o out ls
</code></pre></div></div>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># Slow the target command and print details for each syscall:</span>
strace <span class="nb">command</span>

<span class="c"># Slow the target PID and print details for each syscall:</span>
strace <span class="nt">-p</span> PID

<span class="c"># Slow the target PID and any newly created child process, printing syscall details:</span>
strace <span class="nt">-fp</span> PID

<span class="c"># Slow the target PID and record syscalls, printing a summary:</span>
strace <span class="nt">-cp</span> PID

<span class="c"># Slow the target PID and trace open() syscalls only:</span>
strace <span class="nt">-eopen</span> <span class="nt">-p</span> PID

<span class="c"># Slow the target PID and trace open() and stat() syscalls only:</span>
strace <span class="nt">-eopen</span>,stat <span class="nt">-p</span> PID

<span class="c"># Slow the target PID and trace connect() and accept() syscalls only:</span>
strace <span class="nt">-econnect</span>,accept <span class="nt">-p</span> PID

<span class="c"># Slow the target command and see what other programs it launches (slow them too!):</span>
strace <span class="nt">-qfeexecve</span> <span class="nb">command</span>

<span class="c"># Slow the target PID and print time-since-epoch with (distorted) microsecond resolution:</span>
strace <span class="nt">-ttt</span> <span class="nt">-p</span> PID

<span class="c"># Slow the target PID and print syscall durations with (distorted) microsecond resolution:</span>
strace <span class="nt">-T</span> <span class="nt">-p</span> PID</code></pre></figure>

<h1 id="syscall-must-to-read-xx-man">syscall, must to read xx man</h1>

<h3 id="read-read-bytes-from-a-file-descriptorfilesocket">read: read bytes from a file descriptor(file,socket)</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#include &lt;unistd.h&gt;

ssize_t read(int fd, void *buf, size_t count)
</code></pre></div></div>

<h3 id="write-write-bytes-into-a-file-descriptorfilesocket">write: write bytes into a file descriptor(file,socket)</h3>


                </div>
                <div class="read-all">
                    <a  href="/2015/01/14/KeySyscalls/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2015/01/11/SimplyLinuxDeviceDrives/">MKNOD命令</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2015-01-11
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#shell" title="Category: shell" rel="category">shell</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <p>#mknod</p>

<p>mknod [opiton] NAME TYPE [major num] [minor num]</p>

<p>mknod /dev/memory c 60 0</p>


                </div>
                <div class="read-all">
                    <a  href="/2015/01/11/SimplyLinuxDeviceDrives/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2015/01/07/python_install_packets/">python安装软件</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2015-01-07
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#python" title="Category: python" rel="category">python</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <h1 id="debain安装python3">debain安装python3</h1>

<p>因为debian在自带的python为2.7,在执行其他的一些东西时会碰上各种各样的问题,所以,升级版本是唯一的选择.</p>

<p>1、下载python3.3安装包</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget http://www.python.org/ftp/python/3.3.0/Python-3.3.0.tgz
</code></pre></div></div>

<p>2、解压安装包</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tar -zxvf Python-3.3.0.tgz
</code></pre></div></div>

<p>3、进入解压后目录</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd Python-3.3.0
</code></pre></div></div>

<p>4、创建安装目录</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir /usr/local/python3.3
</code></pre></div></div>

<p>5、编译安装</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./configure --prefix=/usr/local/python3.3
</code></pre></div></div>

<p>6、执行</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make
make install
</code></pre></div></div>

<p>7、此时已完成新版本的安装，但由于老版本还在系统中，所以需要将原来/usr/bin/python链接改为新的连接：
先修改老的连接，执行</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mv /usr/bin/python /usr/bin/python_bak
</code></pre></div></div>

<p>再建立新连接</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ln -s /usr/local/python3.3/bin/python3.3 /usr/bin/python
</code></pre></div></div>

<p>8、查询python版本，执行：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python --version
</code></pre></div></div>

<h1 id="easy_install-安装软件">easy_install 安装软件</h1>
<p>现在主流系统不推荐使用这种方法了，但是有时候为了方便，会简单的使用一下，比如，我的这篇文章<a href="http://www.aftermath.cn/django_1.html">install django</a>,但是当我日后想要卸载旧版的 Django遇上问题了，不知道使用的哪个方法安装的，现在简单的记录下：</p>

<p>可以再重新安装一遍，找到egg包。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sudo</span> <span class="n">easy_install</span> <span class="n">install</span> <span class="o">-</span><span class="n">m</span> <span class="n">django</span>
<span class="c1">#  在输出的界面上有这个egg的位置
</span><span class="n">rm</span> <span class="o">-</span><span class="n">rf</span> <span class="n">path</span><span class="o">-</span><span class="n">sth</span><span class="o">-</span><span class="n">egg</span>
</code></pre></div></div>
<p>这两篇文章有点相互引用的味道，够了。</p>

<h1 id="pip">pip</h1>

<p><a href="https://stackoverflow.com/questions/1231688/how-do-i-remove-packages-installed-with-pythons-easy-install">here</a>,在这篇文章里，人家给了一个比较好的原因说使用pip,下面看看怎么使用吧。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="n">wget</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">bootstrap</span><span class="o">.</span><span class="n">pypa</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">get</span><span class="o">-</span><span class="n">pip</span><span class="o">.</span><span class="n">py</span>
<span class="n">sudo</span> <span class="n">python</span> <span class="n">get</span><span class="o">-</span><span class="n">pip</span><span class="o">.</span><span class="n">py</span>
<span class="c1"># 注意，使用 pip install -U pip检查最新的pip版本
</span></code></pre></div></div>
<p>这里多说一句，你觉得是不是应该将python设置最新的？不一定的，但是更新最新版本，有好处。django最新版本，就是面向了python 3.6</p>

<h2 id="卸载">卸载</h2>
<p>这个软件可以使用 “uninstall”选项，甚至可以删除<code class="highlighter-rouge">easy_install</code>软件安装的包。</p>

<h1 id="建立虚拟环境">建立虚拟环境</h1>
<p>使用Django软件啥的，就需要一个虚拟环境，这个环境就是系统的一个位置，你可以在其中安装包，并将其与其他Python包分离，这样做是有益的。</p>

<h2 id="安装">安装</h2>

<p>书上说，python 3 以上可以直接使用</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> python -m venv ll_env
</code></pre></div></div>

<p>来建立虚拟环境但是在我的机器上有些问题，现在先放下[question].</p>

<p>可以使用virtualenv包，这样就问题不大了。</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span> <span class="n">virtualenv</span>
</code></pre></div></div>

<h1 id="创建项目">创建项目</h1>
<p>下面就是建立一个目录mysite, 然后创建一个虚拟环境.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>my_project_folder
virtualenv ll_env
<span class="c"># 激活</span>
<span class="nb">source </span>ll_env/bin/activate
</code></pre></div></div>
<p>这个命令执行后，会在本地生成一个与ll_env 的文件夹，包含python的可执行文件和pip库的拷贝，可用于安装其他包。</p>

<p>但是有时候你想使用系统中其他的包，在虚拟环境下你是无法使用的。如果在系统环境中想要使用系统环境的第三方的软件包，可以在创建虚拟环境的时候使用　<code class="highlighter-rouge">-system-site-packages</code> 参数。</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>virtualenv <span class="nt">--system-site-packages</span>
</code></pre></div></div>

<p>还可以制定python的版本，当然前提是你的系统中已经安装了相应的python。</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>virtualenv <span class="nt">-p</span> /usr/bin/python2.7 <span class="nb">env</span>
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>deactivate
</code></pre></div></div>

<p>但是还有问题怎么办？比如我的就是有问题了，上面的命令不好使，我自己的解决方案就是再装一遍：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip <span class="nb">install</span> <span class="nt">--user</span> virtualenv
</code></pre></div></div>
<p>这时候你会看到那个virtualenv.py文件在哪了，接着使用：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python path-virtualenv dest-dir
</code></pre></div></div>

<p>这样就可以了。</p>

                </div>
                <div class="read-all">
                    <a  href="/2015/01/07/python_install_packets/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2014/12/24/Perl2/">perl练习(2)</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2014-12-24
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#perl" title="Category: perl" rel="category">perl</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <p>#正则表达式
###匹配一个单词
“Hello World” =~ /World/; #成功
这里“Hello World”是一个字符串，World是正则表达式，/ /包围的/World/告诉perl为了匹配搜索字符串，操作符是”=~”连接字符串和正则表达式。</p>

<p>正则表达式操作符有两种， =~ 和!~.
###() group
Perl 中引入了一个(),由此出现的 \1,\2是抓取(),(\1 is back reference)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$_ = "abba";
if (/(.)\1/) {
	print "It matched "
}
</code></pre></div></div>

<p>(.)\1是说你现在匹配一个紧挨着这个字符的东西，上面的例子中，(.)匹配一个a，当它往后寻找时，必须找一个同他匹配的。现在是ab，则匹配下一个是abb,于是就匹配了bb.</p>

<p>不是不是，为什么原文书我看不懂</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/(fred)*/ matches strings like hello, world
</code></pre></div></div>

<p>#perl的调试技术
下面说的perl的调试技术是针对Perl解释器本身，可以通过 -d 选项打开这个功能，我们简单的就这个调试技术做个了解。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>perl -d xx.pl
</code></pre></div></div>

<p>这样就打开了调试功能。
##插入/查看/删除断点</p>

<p>插入断点使用b命令，格式为 b 行号/函数名 条件</p>

<p>查看断点使用L命令，注意使用大写。小写只会显示程序尚未到达的部分内容。</p>

<p>删除断点使用B命令，格式为 B 行号|* ,使用通配符删除所有的断点。
##增加/查看/删除监视
新填一个变量，格式 w $val==1</p>

<p>查看这个变量，格式 p $val==1</p>

<p>删除这个变量，格式 W $val==1
##步入执行
碰到子程序会进入到子程序， 命令 s</p>

<p>退出执行的命令为 r</p>

<p>##退出调试</p>

<p>q</p>

<p>p128
=======摘自网络======</p>
<ol>
  <li>chomp无参数时，使用默认参数，将对$_操作。</li>
  <li>数组@array..可用$array[number]引用。$#array..表示数组中索引数。</li>
  <li>$!包含出错信息；</li>
  <li>默认打开文件句柄的方式是“&lt;”即输入，“»”和“&gt;”区别就在于一个添加方式操作
文件的。
if(@ARGV &lt; 2){
die “Not enough arguments\n”;
}</li>
  <li>select LOG;改变默认句柄；在接下来的输出时不需要输入句柄参数；
print LOG “Hello world!\n”;</li>
  <li>重新打开一个句柄会关闭之前的文件句柄；</li>
  <li>my @k = keys %hash; my@v = values %hash返回键值或者变量值；
hask中exists函数判断时候存在某个key，delete函数删除key和value；</li>
  <li>”.”是元字符的通配符。星号（”*“）是匹配前一项0次或者多次（简单量词），
“+”是指一个或者多个，”?”是表示出现不出现一次。</li>
  <li>“/i”大小写无关；”/s”匹配任何符号；”/x”添加空格；结合用”/is”;
10.”m//”其实代表的就是一般的模式匹配”/ /”也可以使用m(),m{},m&lt;&gt;..类似”qw//”。
11.词界锚定，\b，是针对单词使用的。如/\bfred\b/可以匹配上单词fred.
12.$1, $2 这样的名字同模式中括号对数中匹配的项目；
13.三个特殊变量($`, $&amp;, $’)来指出是在什么地方匹配上的，分别为左中右。
14.”/s”如果不加”/g”只能执行一次；
15.unless和if相反使用，同时可以紧接在控制修饰语后形成一条语句，elsif不是elseif，少了一个e；
16.last和next对应别的语言的break和continue；redo不进行条件表达式的下一个
循环即直接跳转到循环内容的顶部。
17.unlink “file”;rename “old”,”new”;link “file”;mkdir “file”, oct(“permission”);rmdir “file”;
chmod 0755, “fred”, “barney”;chown $user, $group, glob “<em>.o”;utime $now, $ago, glob “</em>”;
18.index..$where = index($big, $small);开头处找到，则index 返回0。
如果一个字符后，则返回１，依次类推。如果子串不存在，则返回-1;rindex…
19.$part = substr($string, $initial_position, $length);
20.my $money = sprintf “%.2f”, 2.49997;
21.system “date”;
22.my(undef, $card_num, undef, undef, undef, $count) = split /:/;</li>
</ol>
<p>&lt;/pre&gt;</p>

                </div>
                <div class="read-all">
                    <a  href="/2014/12/24/Perl2/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2014/12/21/Mutt-msmtp-install/">Mutt,msmtp,fetchmail,procmail的配合使用</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2014-12-21
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#tools" title="Category: tools" rel="category">tools</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <p>想要真正使用mutt，必须详细了解邮件系统的运作机制</p>

<p>首先是安装必须的软件</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install mutt fetchmail procmail msmtp
</code></pre></div></div>

<p>2.
邮件接收程序fetchmail和邮件分拣程序procmail后，首先分别创建各自的配置文件$ HOME/.fetchmailrc和$HOME/.procmailrc，这样为的是让我们能独立使用fetchmail和procmail这两个程序 通过pop接收并分拣邮件。</p>

<p>###关于mutt的一点说明</p>

<p>1.邮件处理分为很多部分，这取决于你想如何应用这个邮件系统。</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>邮件客户端(MUA),	A mail user agent MUA:
MUA: Mail User Agent (email client)
MTA: Mail Transport Agent (SMTP server)

mutt and SMTP

MDA: Mail Delivery Agent
MRA: Mail Retrieval Agent (POP/IMAP client)
</code></pre></div></div>

<p>在这里，我们使用mutt作为邮件客户端。</p>

<p>###分步讲解
2.1</p>

<p>MUA：让用户管理，如阅读、储存邮箱里的email，或者通过MSA将新的邮件发出。
除了在unix上流行的mutt,其他较为流行的MUA还有：</p>

<p>Other popular MUAs include Thunderbird, Kmail, evolution, Sylpheed,mulberry, pegasus, pine, and elm (mutt’’s predecessor)…</p>

<p>2.2</p>

<p>MTA: Mail Transport Agent(SMTP server)</p>

<p>MTA的功能是接受、发送email到其他的MTAs，在Internet上，MTAs与MTAs交流使用的是 the Simple Mail Transfer Protocol,简称SMTP.官网上还有很多，自己也没有看懂，先就不写了</p>

<p>较流行的MTAs有</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>exim
postfix
sendmail
qmail
</code></pre></div></div>

<p>2.3</p>

<p>MDA: Mail Delivery Agent</p>

<p>MDA的功能是从MTA接收一封email或者发送(过滤)email到用户的邮箱文件夹。</p>

<p>而MDAs用的较多就是procmail.</p>

<p>2.4</p>

<p>MRA: Mail Retrieval Agent(POP/IMAP client)</p>

<p>MRA的处理对象是POP/IMAP，很多功能和MUAs很象如果你能直接使用SHELL-cmd或者mutt直接读取邮件服务器的本地邮件，就不需要MRA了。</p>

<p>我的理解是我们之所以使用MRA是我们能直接使用上面情况的机会很少，更多的使用是例如网易的163、126,google的gmail的邮件服务器，那么就需要MRA将他们服务器上的邮件转移到你这儿来</p>

<p>MRA使用较多的是</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fetchmail ( http://fetchmail.berlios.de/)
getmail ( http://pyropus.ca/software/getmail/)
retchmail ( http://freecode.com/projects/retchmail)
</code></pre></div></div>

<p>##注意</p>

<p>在实际应用中，上面的划分存在很多变体，与上面各个子系统的功能会有部分的叠加和交叉，其实，上面的邮件子系统也存在着很多交叉的功能，大家注意区分，毕竟，万变不离其宗。
###参考—–</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> http://www.iki.fi/era/procmail/mini-faq.html#appendix-mx
 http://www.feep.net/sendmail/tutorial/intro/MUA-MTA-MDA.html
 http://ebusiness.gbdirect.co.uk/howtos/mail-system.html
 http://twiki.org/cgi-bin/view/Wikilearn/EmailServerSketches
 http://www.tldp.org/HOWTO/Mail-User-HOWTO/
 http://www.netbsd.org/docs/guide/en/chap-mail.html
</code></pre></div></div>

<p>=====================</p>

<p>前面都是基本知识,废话,下面才是重点</p>

<p>====================</p>

<p>#安装过程</p>
<h2 id="安装mutt">安装mutt</h2>
<p>建议源码安装，我自己偷懒了直接(先测试 mutt -v,若找不到，可能你的linux发行版没有安装)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install mutt
</code></pre></div></div>

<p>接着	mutt -v会出现</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>System: xxx [using ncurses 5.2] [using libiconv 1.7]
Compile options:
-DOMAIN
-DEBUG
-HOMESPOOL  +USE_SETGID  +USE_DOTLOCK  +DL_STANDALONE
+USE_FCNTL  -USE_FLOCK
+USE_POP  +USE_IMAP  -USE_GSS  +USE_SSL  -USE_SASL  -USE_SASL2
+HAVE_REGCOMP  -USE_GNU_REGEX
+HAVE_COLOR  +HAVE_START_COLOR  +HAVE_TYPEAHEAD  +HAVE_BKGDSET
+HAVE_CURS_SET  +HAVE_META  +HAVE_RESIZETERM
+CRYPT_BACKEND_CLASSIC_PGP  +CRYPT_BACKEND_CLASSIC_SMIME
-CRYPT_BACKEND_GPGME  -BUFFY_SIZE -EXACT_ADDRESS  -SUN_ATTACHMENT
+ENABLE_NLS  -LOCALES_HACK  +HAVE_WC_FUNCS  +HAVE_LANGINFO_CODESET		+HAVE_LANGINFO_YESEXPR
+HAVE_ICONV  -ICONV_NONTRANS  -HAVE_LIBIDN  +HAVE_GETSID			-HAVE_GETADDRINFO
-ISPELL
SENDMAIL="/usr/lib/sendmail"
MAILPATH="/var/mail"
...
EXECSHELL="/bin/sh"
</code></pre></div></div>

<p>我们可以看出mutt的默认发送邮件的程序是 sendmail,下面我们使用msmtp来发送邮件,
(配置文件先不写,在msmtp的后面)
##install msmtp
	sudo apt-get install msmtp</p>

<p>msmtp 是一款专门负责邮件发送的客户端软件，基于GPL发布，支持TLS/SSL、DNS模式、IPv6、服务器端认证、多用户等特性。</p>

<p>创建msmtp的配置文件～/.msmtprc,内容如下:</p>

<p>vim $HOME/.msmtprc</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">defaults
tls on
tls_starttls on
tls_trust_file /etc/ssl/certs/ca-certificates.crt

<span class="c"># 126</span>
account default
host smtp.126.com
from yuzibode@126.com
auth on <span class="c">#</span>

port 25
user yuzibode
password xx

logfile /var/msmtp.log</code></pre></figure>

<p>这个配置文件都要注意权限，</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chmod 0600 $HOME/.msmtprc
</code></pre></div></div>


                </div>
                <div class="read-all">
                    <a  href="/2014/12/21/Mutt-msmtp-install/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2014/12/11/segmentforlinux/">linux中的段</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2014-12-11
                    </div>
                    <div class="label-card">
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#kernel" title="Category: kernel" rel="category">kernel</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <h1 id="简介">简介</h1>
<p>保护模式下段描述表分为全局描述符表(GDT)、中断描述表（IDT）、局部描述符表（LDT）。</p>

<p>linux使用以下段描述符：</p>

<p>.内核代码段</p>

<p>.内核数据段</p>

<p>.用户代码段</p>

<p>.用户数据段</p>

<p>.TSS段</p>

<p>.默认LDT段</p>

<p>GDT中的内核代码段(kernel code segment)描述表中的值如下：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.Base = 0x00000000
.Limit 0x00000000(2^32-1 = 4GB)
.G(颗粒标识) = 1,表示段的大小是以页为单位的
.S = 1,表示普通代码段或数据段
.Type = 0xa, 表示可以读取或者可以执行的代码段
.DPL = 0,表示内核模式
</code></pre></div></div>

<p>与这个段相关的线性地址是4GB, S=1 和type=0xa表示代码段，选择器在cs寄存器中，linux访问这个段选择器的宏是_KERNEL_CS.</p>

<p>Kernel data segment与上面的代码段相似，只是.Type的字段值为2,选择器在ds寄存器中，访问这个段选择器的宏是_KERNEL_DS</p>

<p>user code segment 由处于用户模式下的所有进程共享，存储在GDT中的对应段描述符的值如下：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.Base = 0x00000000
.Limit = 0xffffffff
.G = 1
.S = 1
.Type = 0xa
.DPL = 3 可使用_USER_CS访问 user data segment 中唯一不同的字段就是Type = 2,使用_USER_DS
</code></pre></div></div>

<p>除了以上的段描述表以外，GDT中还包含了用于创建每个进程的段描述 - TSS和LDT</p>

<p>每个TSS代表一个不同的进程，TSS中保存了每个CPU的硬件的上下文信息，它有助于切换上下文。</p>

<p>每个进程都有自己在GDT中存储器的对应的TSS描述符，其值如下：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.Base = &amp;tss(对应进程描述符的TSS字段的地址，例如&amp;tss_struct)
.Limit = 0xeb（TSS段的大小是236字节）
.Type = 9或11
.DPL = 0,用户模式不能访问TSS。G位被清除。
</code></pre></div></div>

                </div>
                <div class="read-all">
                    <a  href="/2014/12/11/segmentforlinux/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
        </ul>



        <!-- Pagination links -->
        <div class="pagination">
          
            <a href="/index.html" class="previous"><i class="fa fa-angle-double-left"></i></a>
            <a href="/page28" class="previous"><i class="fa fa-angle-left"></i></a>
          
          <span class="page_number ">29/36</span>
          
            <a href="/page30" class="next"><i class="fa fa-angle-right"></i></a>
            <a href="/page36" class="next"><i class="fa fa-angle-double-right"></i></a>
          
        </div>
    </div>
    <!-- <button class="anchor"><i class="fa fa-anchor"></i></button> -->
    <div class="right">
        <div class="wrap">
            <div class="side">
                <div>
                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                    Recent Posts
                </div>
                <ul class="content-ul" recent>
                    
                        <li><a href="/2018/09/20/blog-update-themes/">blog更换主题</a></li>
                    
                        <li><a href="/2018/09/16/debian-desktop/">debian桌面系统</a></li>
                    
                        <li><a href="/2018/08/31/sdn_summary/">SDN之OVS学习</a></li>
                    
                        <li><a href="/2018/06/12/git-push/">git pull-request使用简介</a></li>
                    
                        <li><a href="/2018/06/04/libvirt-trouble-summary/">libvirt问题汇总</a></li>
                    
                        <li><a href="/2018/06/03/ebpf-kernel/">ebpf基础知识</a></li>
                    
                        <li><a href="/2018/06/02/neomutt-imap-126/">Neomutt使用126邮箱的imap</a></li>
                    
                        <li><a href="/2018/05/22/leetcode-easy/">leetcode easy task</a></li>
                    
                        <li><a href="/2018/05/21/xdp-introducation/">xdp简介</a></li>
                    
                        <li><a href="/2018/05/13/bpf-bcc/">BPF-bcc usage</a></li>
                    
                </ul>
            </div>

            <!-- Content -->
            <div class="side ">
                <div>
                    <i class="fa fa-th-list"></i>
                    Categories
                </div>
                <ul class="content-ul" cate>
                    
                    <li>
                        <a href="/category/#experience" class="categories-list-item" cate="experience">
                            <span class="name">
                                experience
                            </span>
                            <span class="badge">5</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#debian" class="categories-list-item" cate="debian">
                            <span class="name">
                                debian
                            </span>
                            <span class="badge">5</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#tools" class="categories-list-item" cate="tools">
                            <span class="name">
                                tools
                            </span>
                            <span class="badge">28</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#plan" class="categories-list-item" cate="plan">
                            <span class="name">
                                plan
                            </span>
                            <span class="badge">3</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#algorithm" class="categories-list-item" cate="algorithm">
                            <span class="name">
                                algorithm
                            </span>
                            <span class="badge">2</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#DS" class="categories-list-item" cate="DS">
                            <span class="name">
                                DS
                            </span>
                            <span class="badge">8</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#mood" class="categories-list-item" cate="mood">
                            <span class="name">
                                mood
                            </span>
                            <span class="badge">7</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#OS" class="categories-list-item" cate="OS">
                            <span class="name">
                                OS
                            </span>
                            <span class="badge">5</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#shell" class="categories-list-item" cate="shell">
                            <span class="name">
                                shell
                            </span>
                            <span class="badge">8</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#kernel" class="categories-list-item" cate="kernel">
                            <span class="name">
                                kernel
                            </span>
                            <span class="badge">26</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#book" class="categories-list-item" cate="book">
                            <span class="name">
                                book
                            </span>
                            <span class="badge">5</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#git" class="categories-list-item" cate="git">
                            <span class="name">
                                git
                            </span>
                            <span class="badge">12</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#c" class="categories-list-item" cate="c">
                            <span class="name">
                                c
                            </span>
                            <span class="badge">13</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#perl" class="categories-list-item" cate="perl">
                            <span class="name">
                                perl
                            </span>
                            <span class="badge">5</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#assembly" class="categories-list-item" cate="assembly">
                            <span class="name">
                                assembly
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#make" class="categories-list-item" cate="make">
                            <span class="name">
                                make
                            </span>
                            <span class="badge">3</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#python" class="categories-list-item" cate="python">
                            <span class="name">
                                python
                            </span>
                            <span class="badge">18</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#java" class="categories-list-item" cate="java">
                            <span class="name">
                                java
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#mysql" class="categories-list-item" cate="mysql">
                            <span class="name">
                                mysql
                            </span>
                            <span class="badge">2</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#network" class="categories-list-item" cate="network">
                            <span class="name">
                                network
                            </span>
                            <span class="badge">8</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#unix" class="categories-list-item" cate="unix">
                            <span class="name">
                                unix
                            </span>
                            <span class="badge">10</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#css" class="categories-list-item" cate="css">
                            <span class="name">
                                css
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#dhc" class="categories-list-item" cate="dhc">
                            <span class="name">
                                dhc
                            </span>
                            <span class="badge">4</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#javascript" class="categories-list-item" cate="javascript">
                            <span class="name">
                                javascript
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#oracle" class="categories-list-item" cate="oracle">
                            <span class="name">
                                oracle
                            </span>
                            <span class="badge">3</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#system" class="categories-list-item" cate="system">
                            <span class="name">
                                system
                            </span>
                            <span class="badge">5</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#english" class="categories-list-item" cate="english">
                            <span class="name">
                                english
                            </span>
                            <span class="badge">2</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#writing" class="categories-list-item" cate="writing">
                            <span class="name">
                                writing
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#math" class="categories-list-item" cate="math">
                            <span class="name">
                                math
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#word" class="categories-list-item" cate="word">
                            <span class="name">
                                word
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#leetcode" class="categories-list-item" cate="leetcode">
                            <span class="name">
                                leetcode
                            </span>
                            <span class="badge">4</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#H4X0r" class="categories-list-item" cate="H4X0r">
                            <span class="name">
                                H4X0r
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#django" class="categories-list-item" cate="django">
                            <span class="name">
                                django
                            </span>
                            <span class="badge">2</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#life" class="categories-list-item" cate="life">
                            <span class="name">
                                life
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#nft" class="categories-list-item" cate="nft">
                            <span class="name">
                                nft
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#kvms" class="categories-list-item" cate="kvms">
                            <span class="name">
                                kvms
                            </span>
                            <span class="badge">2</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#patent" class="categories-list-item" cate="patent">
                            <span class="name">
                                patent
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#bpf" class="categories-list-item" cate="bpf">
                            <span class="name">
                                bpf
                            </span>
                            <span class="badge">3</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#xdp" class="categories-list-item" cate="xdp">
                            <span class="name">
                                xdp
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#sdn" class="categories-list-item" cate="sdn">
                            <span class="name">
                                sdn
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                </ul>
            </div>
            <!-- 其他div框放到这里 -->
            <div class="side">
                <div>
                    <i class="fa fa-tags"></i>
                    Tags
                </div>
                <div class="tags-cloud">
                    
                    
                    
                    

                    

                    
                      
                      
                      
                      
                      
                      <a href="/tag/#experience" style="font-size: 18pt; color: #000;">experience</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#CS" style="font-size: 9pt; color: #999;">CS</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#English" style="font-size: 9pt; color: #999;">English</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#linux" style="font-size: 9pt; color: #999;">linux</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#mood" style="font-size: 9pt; color: #999;">mood</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#She" style="font-size: 9pt; color: #999;">She</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#FreeDos" style="font-size: 9pt; color: #999;">FreeDos</a>
                    
                </div>
            </div>

            <!-- <div class="side">
                <div>
                    <i class="fa fa-external-link"></i>
                    Links
                </div>
                <ul  class="content-ul">

                </ul>
            </div> -->
        </div>
    </div>
</div>
<!-- <script src="/js/scroll.min.js " charset="utf-8"></script> -->
<!-- <script src="/js/pageContent.js " charset="utf-8"></script> -->


    <footer class="site-footer">


    <div class="wrapper">

        <p class="description">
             技术笔记！ 
        </p>
        <p class="contact">
            Contact me at: 
            <a href="https://github.com/yuzibo" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a>  
            <a href="mailto:yuzibode@126.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>        
        </p>
        <p>
            本站总访问量<span id="busuanzi_value_site_pv"></span>次，本站访客数<span id="busuanzi_value_site_uv"></span>人次，本文总阅读量<span id="busuanzi_value_page_pv"></span>次
        </p>
        <p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>
            <span>
                Theme designed by <a href="https://github.com/Gaohaoyang">HyG</a>.
            </span>
        </p>
    </div>
</footer>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <div class="back-to-top">
    <a href="#top" data-scroll>
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script type="text/javascript" charset="utf-8" src="https://changyan.itc.cn/js/lib/jquery.js"></script>
    <script src=" /js/main.js " charset="utf-8"></script>
    <script src=" /js/prism.js " charset="utf-8"></script>
    <script src=" /js/smooth-scroll.min.js " charset="utf-8"></script>
    <script type="text/javascript">
      smoothScroll.init({
        speed: 500, // Integer. How fast to complete the scroll in milliseconds
        easing: 'easeInOutCubic', // Easing pattern to use
        offset: 20, // Integer. How far to offset the scrolling anchor location in pixels
      });
    </script>
    <script type="text/javascript">
	$('pre').addClass("line-numbers");
    </script>
    <!-- <script src=" /js/scroll.min.js " charset="utf-8"></script> -->
  </body>

</html>
